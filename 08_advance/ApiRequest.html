<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax and XMLHttpRequest</title>
</head>
<body>
    
</body>


</html>

<!-- Script -->
<script>

    // To make an HTTP request to the server with JavaScript
    const xhr = new XMLHttpRequest();

    // Process the server response here.
    xhr.onreadystatechange = () => {

        // State 0-4
        console.log(xhr.readyState);

        // Full server response was received and it's OK for you to continue processing it.
        if (xhr.readyState == 4) {

            // Server all data store in variable as a object
            const data = xhr.responseText;          

            // For performing any operation we need to change the dataType(Json)
            // Why json?
            // json converted object into live thing like :- Array in array, strinng in string, number in number
            // Object to json = json.parse(server_data_holder_variable);
            const inJson = JSON.parse(data);
            console.log(inJson[1].name);
        }
        // Next, check the HTTP response status codes of the HTTP response. 
        if (xhr.status <= 400 || !(xhr.status == 0)) {
            console.log('Successfully got page');
        } else {
            console.log('404,0, 500 page is not found error founded');
        }
    }

    // Next, after declaring what happens when you receive the response, you need to actually make the request, by calling the open() and send() methods
    // of the HTTP request object, like this:
    xhr.open('GET', 'http://jsonplaceholder.typicode.com/users/');      
    // 1. The first parameter of the call to open() is the HTTP request method â€“ GET, POST, HEAD, or another method supported by your server. Keep the method all-capitals.
    // 2. The second parameter is the URL you're sending the request to.
    // 3. The optional third parameter sets whether the request is asynchronous. If true (the default), JavaScript execution will continue 

    // After making a request, you will receive a response back. At this stage, you need to tell the XMLHttpRequest object which JavaScript function 
    // will handle the response, by setting the onreadystatechange property of the object to the function called when the request changes state, like this:
    xhr.send();
</script>